<!-- Buttons Start -->
@using EduAll.ViewComponant
@using Microsoft.AspNetCore.Identity
@using EduAll.Domain

@inject SignInManager<AppUser> SignInManager
@inject UserManager<AppUser> UserManager

@if (SignInManager.IsSignedIn(User))
{
    var user = await UserManager.GetUserAsync(User);
    var userImage = !string.IsNullOrEmpty(user?.ImgUrl) ? user.ImgUrl : "/Admin/assets/images/thumbs/user-img.png";
    
    <div class="dropdown">
        <button class="d-flex align-items-center gap-5 border border-gray-100 rounded-pill p-1 pe-3 bg-white hover-bg-main-50 transition-1"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false">
            
            <div class="position-relative">
                <img src="@userImage" alt="User" class="w-40 h-40 rounded-circle object-fit-cover border border-2 border-white shadow-sm" />
                <span class="w-10 h-10 position-absolute bottom-0 end-0 border border-2 border-white rounded-circle bg-success-500"></span>
            </div>

            <div>
                <span>@user.FirstName</span>
            </div>
            <i class="ph ph-caret-down text-gray-400 text-xs ms-1"></i>
        </button>
        
        <div class="dropdown-menu dropdown-menu-end border-0 shadow-lg rounded-16 p-0 mt-2" style="width: 280px;">
            <div class="card border-0">
                <div class="card-body p-0">
                    
                    <div class="p-20 border-bottom border-gray-100 bg-main-25 rounded-top-16">
                        <div class="flex-align gap-12">
                            <img src="@userImage" alt="" class="w-48 h-48 rounded-circle object-fit-cover border border-white shadow-sm" />
                            <div class="overflow-hidden">
                                <h6 class="mb-0 text-15 text-truncate">@user.FirstName @user.LastName</h6>
                                <p class="text-13 text-gray-500 text-truncate">@user.Email</p>
                            </div>
                        </div>
                    </div>
                    
                    <ul class="list-unstyled p-12 mb-0">
                        @if (User.IsInRole("Admin"))
                        {
                            <li>
                                <a asp-area="Admin" asp-action="settings" asp-controller="Account" target="_blank" class="py-10 px-16 rounded-8 hover-bg-main-50 text-gray-600 hover-text-main-600 flex-align gap-10 transition-1">
                                    <i class="ph ph-gear text-lg"></i> Account Settings
                                </a>
                            </li>
                        }
                        else
                        {
                            <li>
                                <a asp-action="settings" asp-controller="Account" target="_blank" class="py-10 px-16 rounded-8 hover-bg-main-50 text-gray-600 hover-text-main-600 flex-align gap-10 transition-1">
                                    <i class="ph ph-gear text-lg"></i> Account Settings
                                </a>
                            </li>
                        }

                        @if (User.IsInRole("Admin"))
                        {

                            <li>
                                <a asp-action="index" asp-controller="adminsuggestion" class="py-10 px-16 rounded-8 hover-bg-main-50 text-gray-600 hover-text-main-600 flex-align gap-10 transition-1">
                                    <i class="ph ph-chats-teardrop"></i> Inboxes
                                </a>
                            </li>
                            
                        }
                        else
                        {

                            <li>
                                <a asp-action="index" asp-controller="MyCourses" asp-route-id="@User" target="_blank" class="py-10 px-16 rounded-8 hover-bg-main-50 text-gray-600 hover-text-main-600 flex-align gap-10 transition-1">
                                    <i class="ph ph-book-open text-lg"></i> My Courses
                                </a>
                            </li>
                            
                        }
                        
                        <li class="border-top border-gray-100 my-2"></li>
                        
                        <li>
                            <form class="w-100" asp-area="Admin" asp-action="Logout" asp-controller="Account">
                                <button type="submit" class="w-100 py-10 px-16 rounded-8 hover-bg-danger-50 text-gray-600 hover-text-danger-600 flex-align gap-10 transition-1 bg-transparent border-0 text-start">
                                    <i class="ph ph-sign-out text-lg"></i> Log Out
                                </button>
                            </form>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="d-flex align-items-center gap-3">

        @await Component.InvokeAsync(typeof(NotificationsViewComponent))

        <div class="dropdown">
        </div>

    </div>
}
else
{
    <div class="d-lg-flex d-none flex-align flex-md-nowrap flex-wrap gap-16 flex-shrink-0">
        <a asp-area="Admin" asp-action="SignIn" asp-controller="Account" target="_blank"
           class="btn btn-outline-main rounded-pill flex-align gap-8">
            Login
            <i class="ph-bold ph-arrow-up-right d-flex text-lg"></i>
        </a>
        <a asp-area="Admin" asp-action="Register" asp-controller="Account" target="_blank"
           class="btn btn-main rounded-pill flex-align gap-8">
            Sign Up
            <i class="ph-bold ph-arrow-up-right d-flex text-lg"></i>
        </a>
    </div>
}
<!-- Buttons End -->